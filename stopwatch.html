
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Hanil Timer</title>
    
    <link rel="icon" href="/Timer/favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="/Timer/manifest.json" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Anonymous+Pro&family=Nanum+Myeongjo&display=swap" rel="stylesheet">

    <!-- Tailwind Custom Font & Color 설정 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        Inter: ['Inter', 'sans-serif'],
                        Anonymous_Pro: ['"Anonymous Pro"', 'monospace'],
                        NanumMyeongjo: ['"Nanum Myeongjo"', 'serif']
                    },
                    colors: {
                        hanilgreen: "#00AF84",
                        graylight: "#F0F0F0",
                        graymid: "#DFDFDF",
                        graybg: "#F7F7F7",
                        darkgray: "#444444"
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-white font-Inter">

    <!-- 사이드바 -->
    <aside class="fixed left-0 top-0 w-[180px] h-screen bg-white border-r border-graymid p-6">
        <div>
        <h1 class="text-black text-xl font-semibold mb-10 leading-[30px]">HANIL TIMER</h1>
        <nav class="space-y-2">
            <div class="px-2 h-10 flex items-center gap-4">
                <span class="text-black text-base font-semibold">Features</span>
            </div>
            <a href="index.html" class="block px-2 h-10 flex items-center gap-4 hover:bg-graybg rounded-lg">
                <img src="/Timer/images/PracticeExamTimer.png" alt="모의고사 아이콘" class="w-[25px] h-[25px]" />
                <span class="text-black text-base font-medium">모의고사</span>
            </a>
            <div class="px-2 h-10 flex items-center gap-4 bg-graybg rounded-lg">
                <img src="/Timer/images/Stopwatch.png" alt="스톱워치 아이콘" class="w-[25px] h-[25px]" />
                <span class="text-black text-base font-medium">스톱워치</span>
            </div>
            <a href="timer.html" class="block px-2 h-10 flex items-center gap-4 hover:bg-graybg rounded-lg">
                <img src="/Timer/images/Timer.png" alt="타이머 아이콘" class="w-[25px] h-[26px]" />
                <span class="text-black text-base font-medium">타이머</span>
            </a>
        </nav>
    </aside>
    
    <!-- 상단바 -->
    <header class="ml-[180px] w-[906px] h-[197px] p-8">
        <div class="flex justify-between items-center mb-8">
            <div class="flex space-x-2 bg-graybg p-1 rounded-lg" id="modeButtons">
                <!-- 모드 버튼 -->
                <div class="mode-btn px-3 h-8 bg-white rounded-lg shadow flex items-center text-black text-base font-medium cursor-pointer"
                     data-mode="hms">hour : min : sec</div>
                <div class="mode-btn px-3 h-8 flex items-center text-black text-base font-medium cursor-pointer"
                     data-mode="msms">min : sec : msec</div>
            </div>
            <div class="h-10 px-4 bg-black text-white text-base font-medium rounded-lg flex items-center">for Hanil High</div>
        </div>
        <div>
            <h2 class="text-black text-[34px] font-semibold leading-[37.40px]">스톱워치</h2>
            <p class="text-darkgray text-base font-normal">Stopwatch</p>
        </div>
    </header>

    <!-- 메인 타이머 영역 -->
    <main class="ml-[174px] w-[906px] flex justify-center items-center h-[400px] relative">
        <div class="fixed bottom-4 right-4 text-black text-xl font-NanumMyeongjo whitespace-nowrap">
            한일고등학교 학생자치정부 정보부
        </div>
    </main>

    <script>
        const modeStates = {
            "국어": { timeLeft: 4800, running: false },
            "수학": { timeLeft: 6000, running: false },
        };
    
        let currentmode = "국어";
        let totalTime = 4800;
        let timeLeft = totalTime;
        let timerInterval = null;
        let currentColor = "#00AF84";
    
        function updateProgress() {
            const percent = (1 - timeLeft / totalTime) * 100;
            fillCircle.style.background = `conic-gradient(#f0f0f0 ${percent}%, ${currentColor} ${percent}%)`;
        }
    
        function updateDisplay() {
            const time = Math.max(0, Math.floor(timeLeft));
            const minutes = Math.floor(time / 60);
            const seconds = time % 60;
        
            if (totalTime === 6000) { // 100분 예외 처리
                timerDisplay.textContent = `${minutes}:${seconds}`;
            } else {
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }
        
            updateProgress();
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            modeStates[currentmode].running = false;
            modeStates[currentmode].timeLeft = timeLeft;
            stopButton.classList.add("hidden");
            playButton.classList.remove("hidden");
        }
    
        function resetTimer() {
            stopTimer();
            timeLeft = totalTime;
            updateDisplay();
            modeStates[currentmode].timeLeft = timeLeft;
        }
    
        function startTimer(resume = false) {
            playButton.classList.add("hidden");
            stopButton.classList.remove("hidden");
            modeStates[currentmode].running = true;
    
            const startTime = performance.now() - (totalTime - timeLeft) * 1000;
            timerInterval = setInterval(() => {
                const now = performance.now();
                const elapsed = (now - startTime) / 1000;
                timeLeft = totalTime - elapsed;
    
                if (timeLeft <= 0) {
                    stopTimer();
                    timeLeft = 0;
                    updateDisplay();
                    if (alarmSound) alarmSound.play();
                    alert("⏰ 시간이 끝났습니다!");
                    alarmSound.pause();
                    alarmSound.currentTime = 0;
                    return;
                }
    
                updateDisplay();
            }, 50);
        }
    
        function switchmode(mode) {
            if (currentmode === mode) return;
    
            if (timerInterval !== null) stopTimer();
    
            modeStates[currentmode].timeLeft = timeLeft;
            modeStates[currentmode].running = (timerInterval !== null);
    
            currentmode = mode;
            totalTime = parseInt(document.querySelector(`[data-mode="${mode}"]`).dataset.time);
            timeLeft = modeStates[mode].timeLeft;
            currentColor = document.querySelector(`[data-mode="${mode}"]`).dataset.color;
    
            updateDisplay();
    
            if (modeStates[mode].running) {
                startTimer(true);
            }
        }
    
        playButton.addEventListener("click", () => startTimer());
        stopButton.addEventListener("click", stopTimer);
        resetButton.addEventListener("click", resetTimer);
    
        document.querySelectorAll(".mode-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                document.querySelectorAll(".mode-btn").forEach(otherBtn => {
                    otherBtn.classList.remove("bg-white", "shadow", "rounded-lg");
                    otherBtn.classList.add("bg-transparent");
                });
                btn.classList.add("bg-white", "shadow", "rounded-lg");
                btn.classList.remove("bg-transparent");
    
                switchmode(btn.dataset.mode);
            });
        });
    
        updateDisplay();
    </script>
</body>
</html>
