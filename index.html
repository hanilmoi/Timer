<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hanil Timer</title>

  <link rel="icon" href="/Timer/favicon.ico" type="image/x-icon" />
  <link rel="manifest" href="/Timer/manifest.json" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Anonymous+Pro&family=Nanum+Myeongjo&display=swap" rel="stylesheet">

  <!-- Tailwind Custom Font & Color 설정 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            Inter: ['Inter', 'sans-serif'],
            Anonymous_Pro: ['"Anonymous Pro"', 'monospace'],
            NanumMyeongjo: ['"Nanum Myeongjo"', 'serif']
          },
          colors: {
            hanilgreen: "#00AF84",
            graylight: "#F0F0F0",
            graymid: "#DFDFDF",
            graybg: "#F7F7F7",
            darkgray: "#444444"
          }
        }
      }
    }
  </script>
</head>

<body class="bg-white font-Inter">

  <!-- 사이드바 -->
  <aside class="fixed left-0 top-0 w-[180px] h-screen bg-white border-r border-graymid p-6">
    <h1 class="text-black text-xl font-semibold mb-10 leading-[30px]">HANIL TIMER</h1>
    <nav class="space-y-2">
      <div class="px-2 h-10 flex items-center gap-4">
        <span class="text-black text-base font-semibold">Features</span>
      </div>
      <a href="index.html" class="block px-2 h-10 flex items-center gap-4 hover:bg-graybg rounded-lg">
        <img src="/Timer/images/PracticeExamTimer.png" alt="모의고사 아이콘" class="w-[25px] h-[25px]" />
        <span class="text-black text-base font-medium">모의고사</span>
      </a>
      <div class="px-2 h-10 flex items-center gap-4 bg-graybg rounded-lg">
        <img src="/Timer/images/Stopwatch.png" alt="스톱워치 아이콘" class="w-[25px] h-[25px]" />
        <span class="text-black text-base font-medium">스톱워치</span>
      </div>
      <a href="timer.html" class="block px-2 h-10 flex items-center gap-4 hover:bg-graybg rounded-lg">
        <img src="/Timer/images/Timer.png" alt="타이머 아이콘" class="w-[25px] h-[26px]" />
        <span class="text-black text-base font-medium">타이머</span>
      </a>
    </nav>
  </aside>

  <!-- 상단바 -->
  <header class="ml-[180px] w-[906px] h-[197px] p-8">
    <div class="flex justify-between items-center mb-8">
      <div class="flex space-x-2 bg-graybg p-1 rounded-lg" id="modeButtons">
        <div class="mode-btn px-3 h-8 bg-white rounded-lg shadow flex items-center text-black text-base font-medium cursor-pointer"
          data-mode="hms">hour. min. sec</div>
        <div class="mode-btn px-3 h-8 flex items-center text-black text-base font-medium cursor-pointer"
          data-mode="msms">min. sec. msec</div>
      </div>
      <div class="h-10 px-4 bg-black text-white text-base font-medium rounded-lg flex items-center">for Hanil High</div>
    </div>
    <div>
      <h2 class="text-black text-[34px] font-semibold leading-[37.40px]">스톱워치</h2>
      <p class="text-darkgray text-base font-normal">Stopwatch</p>
    </div>
  </header>

  <!-- 메인 타이머 영역 -->
  <div data-layer="Main" class="Main w-[779px] h-[238px] left-[232px] top-[284px] absolute overflow-hidden">
    <div id="stopwatchDisplay" class="w-[779px] h-[127px] left-0 top-0 absolute text-center justify-center text-black text-8xl font-normal font-['Anonymous_Pro'] leading-[144px]">
      00:00:00
    </div>

    <!-- Reset 버튼 -->
    <button id="resetButton" class="w-[100px] h-[100px] absolute left-[411px] top-[138px] cursor-pointer">
      <div class="w-full h-full bg-[#f0f0f0] rounded-full shadow-[inset_0px_1px_10px_0px_rgba(0,0,0,0.25)]"></div>
      <img src="/Timer/images/Reset.png" alt="리셋 아이콘" class="w-[41.67px] h-[41.67px] absolute left-[29px] top-[29px]" />
    </button>

    <!-- Play 버튼 -->
    <button id="playButton" class="w-[100px] h-[100px] absolute left-[258px] top-[138px] cursor-pointer">
      <div class="w-full h-full bg-[#f0f0f0] rounded-full shadow-[inset_0px_1px_10px_0px_rgba(0,0,0,0.25)]"></div>
      <img src="/Timer/images/Play.png" alt="플레이 아이콘" class="w-[41.67px] h-[41.67px] absolute left-[33px] top-[29px]" />
    </button>

    <!-- Stop 버튼 -->
    <button id="stopButton" class="w-[100px] h-[100px] absolute left-[258px] top-[138px] cursor-pointer hidden">
      <div class="w-full h-full bg-[#f0f0f0] rounded-full shadow-[inset_0px_1px_10px_0px_rgba(0,0,0,0.25)]"></div>
      <img src="/Timer/images/Stop.png" alt="스톱 아이콘" class="w-[33.33px] h-[33.33px] absolute left-[33px] top-[33px]" />
    </button>

    <!-- 라벨 -->
    <div class="left-[533px] top-[386px] absolute justify-center text-black text-xl font-normal font-['NanumMyeongjo'] leading-[30px]">
      한일고등학교 학생자치정부 정보부
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    let stopwatchStartTime = null;
    let stopwatchInterval = null;
    let currentFormat = "hms"; // "hms" or "msms"

    const display = document.getElementById("stopwatchDisplay");
    const playButton = document.getElementById("playButton");
    const stopButton = document.getElementById("stopButton");
    const resetButton = document.getElementById("resetButton");

    function updateStopwatchDisplay() {
      const elapsed = Date.now() - stopwatchStartTime;
      let h, m, s, ms;

      if (currentFormat === "hms") {
        h = Math.floor(elapsed / 3600000);
        m = Math.floor((elapsed % 3600000) / 60000);
        s = Math.floor((elapsed % 60000) / 1000);
        display.textContent = `${String(h).padStart(2, "0")}:${String(m).padStart(2, "0")}:${String(s).padStart(2, "0")}`;
      } else {
        m = Math.floor(elapsed / 60000);
        s = Math.floor((elapsed % 60000) / 1000);
        ms = Math.floor((elapsed % 1000) / 10); // 두 자리 수
        display.textContent = `${String(m).padStart(2, "0")}:${String(s).padStart(2, "0")}:${String(ms).padStart(2, "0")}`;
      }
    }

    function startStopwatch() {
      stopwatchStartTime = Date.now() - (stopwatchElapsed || 0);
      stopwatchInterval = setInterval(updateStopwatchDisplay, 33);
      playButton.classList.add("hidden");
      stopButton.classList.remove("hidden");
    }

    function stopStopwatch() {
      clearInterval(stopwatchInterval);
      stopwatchInterval = null;
      stopwatchElapsed = Date.now() - stopwatchStartTime;
      playButton.classList.remove("hidden");
      stopButton.classList.add("hidden");
    }

    function resetStopwatch() {
      clearInterval(stopwatchInterval);
      stopwatchInterval = null;
      stopwatchStartTime = null;
      stopwatchElapsed = 0;
      display.textContent = currentFormat === "hms" ? "00:00:00" : "00:00:00";
      playButton.classList.remove("hidden");
      stopButton.classList.add("hidden");
    }

    let stopwatchElapsed = 0;

    playButton.addEventListener("click", startStopwatch);
    stopButton.addEventListener("click", stopStopwatch);
    resetButton.addEventListener("click", resetStopwatch);

    document.querySelectorAll(".mode-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".mode-btn").forEach(other => {
          other.classList.remove("bg-white", "shadow", "rounded-lg");
          other.classList.add("bg-transparent");
        });
        btn.classList.add("bg-white", "shadow", "rounded-lg");
        btn.classList.remove("bg-transparent");

        currentFormat = btn.dataset.mode === "hms" ? "hms" : "msms";
        resetStopwatch(); // 모드 변경 시 초기화
      });
    });

    // 초기 표시 설정
    resetStopwatch();
  </script>
</body>
</html>
